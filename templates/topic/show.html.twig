{% extends 'base.html.twig' %}

{% block title %}Topic{% endblock %}

{% block body %}
    <h1>{{ topic.title }}</h1>
    <p>{{ topic.description }}<p>
    <p>Date de création : {{ topic.creationDate ? topic.creationDate|date('d-m-Y') : '' }}<p>
    <p>Date de modification : {{ topic.modificationDate ? topic.modificationDate|date('d-m-Y') : ''}}</p>
    <p>Créer par {{ topic.user.pseudo ? topic.user.pseudo : topic.user.email }}<p>
    {% if app.user and app.user == topic.user %}
        <a href="{{ path('app_topic_edit', {'id': topic.id}) }}" class="btn btn-warning">modifier</a>
    {% endif %}
    {% if is_granted('ROLE_ADMIN')  or app.user == topic.user %}
        {{ include('topic/_delete_form.html.twig') }}
    {% endif %}

    <h2>Commentaires :</h2>
    {% if app.user %}
        <a href="{{ path('app_comment_new', {'topicId': topic.id}) }}" class="btn btn-dark"><i class="fa-solid fa-comment"></i> Ajout un commentaire</a>
    {% endif %}

    {% for comment in topic.comments %}
        <p>{{ comment.message }}<p>
        <p>Par : {{ comment.user.pseudo }}</p>
    {% endfor %}
{% endblock %}
